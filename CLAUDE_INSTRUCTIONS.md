# Instructions for Claude AI (VS Code)

## What You're Getting

A complete, production-ready real estate lead generation platform built with:
- **Frontend**: React 19 + Tailwind CSS 4 + TypeScript
- **Backend**: Express + tRPC + TypeScript
- **Database**: MySQL with Drizzle ORM
- **APIs**: Realtor.com (RapidAPI), GoHighLevel CRM, Stripe Payments

## Quick Start

### 1. Install Dependencies
```bash
pnpm install
```

### 2. Set Up Environment Variables

Create a `.env.local` file in the project root:
```
DATABASE_URL=mysql://user:password@host:3306/database
RAPIDAPI_KEY=your_rapidapi_key_here
GOHIGHLEVEL_API_KEY=your_ghl_key_here
GOHIGHLEVEL_LOCATION_ID=your_ghl_location_id
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret
JWT_SECRET=any_random_string_here
```

### 3. Run Locally
```bash
# Start both frontend and backend
pnpm dev

# Frontend: http://localhost:5173
# Backend: http://localhost:3001
```

### 4. Build for Production
```bash
pnpm build
```

### 5. Deploy to Vercel

See `DEPLOYMENT_GUIDE.md` for complete instructions.

## Project Structure

```
centralfloridahomes/
â”œâ”€â”€ client/                    # React Frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/            # Page components (Home, Properties, etc)
â”‚   â”‚   â”œâ”€â”€ components/       # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ lib/trpc.ts       # tRPC client configuration
â”‚   â”‚   â”œâ”€â”€ App.tsx           # Main app component with routing
â”‚   â”‚   â”œâ”€â”€ main.tsx          # React entry point
â”‚   â”‚   â””â”€â”€ index.css         # Global styles (Tailwind)
â”‚   â”œâ”€â”€ index.html            # HTML template
â”‚   â””â”€â”€ public/               # Static assets
â”‚
â”œâ”€â”€ server/                    # Express Backend
â”‚   â”œâ”€â”€ index.ts              # Server entry point
â”‚   â”œâ”€â”€ routers.ts            # tRPC procedure definitions
â”‚   â”œâ”€â”€ db.ts                 # Database helper functions
â”‚   â”œâ”€â”€ realtor-api.ts        # Realtor.com API client
â”‚   â””â”€â”€ integrations/         # External API integrations
â”‚       â”œâ”€â”€ gohighlevel.ts    # GoHighLevel CRM
â”‚       â””â”€â”€ stripe.ts         # Stripe payments
â”‚
â”œâ”€â”€ drizzle/                   # Database Schema
â”‚   â””â”€â”€ schema.ts             # Table definitions (properties, leads, subscriptions)
â”‚
â”œâ”€â”€ dist/                      # Production build (generated by pnpm build)
â”‚
â”œâ”€â”€ package.json              # Dependencies & scripts
â”œâ”€â”€ tsconfig.json             # TypeScript configuration
â”œâ”€â”€ vite.config.ts            # Vite configuration
â”œâ”€â”€ vercel.json               # Vercel deployment config
â”œâ”€â”€ DEPLOYMENT_GUIDE.md       # Detailed deployment instructions
â””â”€â”€ README.md                 # Project overview
```

## Key Files to Understand

### Frontend Pages
- `client/src/pages/Home.tsx` - Landing page
- `client/src/pages/Properties.tsx` - Property listing & search
- `client/src/pages/PropertyDetail.tsx` - Property details & lead form
- `client/src/pages/AgentSignup.tsx` - Agent registration
- `client/src/pages/Checkout.tsx` - Subscription checkout

### Backend API
- `server/routers.ts` - All tRPC endpoints
  - `properties.list` - Get properties from Realtor.com
  - `leads.submit` - Submit lead to GoHighLevel
  - `subscriptions.create` - Create Stripe subscription

### Database
- `drizzle/schema.ts` - 4 tables:
  - `properties` - Real estate listings
  - `leads` - Buyer/seller inquiries
  - `subscriptions` - Agent subscription plans
  - `leadPurchases` - Lead purchase history

## Available Scripts

```bash
# Development
pnpm dev              # Start frontend + backend dev servers
pnpm client:dev       # Frontend only
pnpm server:dev       # Backend only

# Building
pnpm build            # Production build
pnpm type-check       # Check TypeScript errors

# Database
pnpm db:push          # Push schema changes to database
```

## API Integration Details

### Realtor.com (RapidAPI)
- Fetches real property listings from Florida
- Supports filtering by city, price, beds
- Returns 20 properties per request
- Endpoint: `properties.list`

### GoHighLevel CRM
- Automatically submits leads when users inquire
- Routes leads to agent's CRM
- Tracks lead status and follow-ups
- Endpoint: `leads.submit`

### Stripe Payments
- Processes agent subscriptions
- Three plans: Starter, Professional, Premium
- Webhook support for payment events
- Endpoint: `subscriptions.create`

## Common Tasks

### Add a New Page
1. Create `client/src/pages/NewPage.tsx`
2. Add route in `client/src/App.tsx`
3. Add navigation link in Home or other pages

### Add a New API Endpoint
1. Add procedure in `server/routers.ts`
2. Use `publicProcedure` or `protectedProcedure`
3. Call from frontend with `trpc.feature.useMutation()`

### Modify Database Schema
1. Edit `drizzle/schema.ts`
2. Run `pnpm db:push`
3. Update database helper functions in `server/db.ts`

### Change Styling
- Global styles: `client/src/index.css`
- Component styles: Use Tailwind classes
- Colors/theme: Defined in CSS variables in `index.css`

## Deployment Checklist

- [ ] All environment variables set in Vercel
- [ ] Database is accessible from Vercel
- [ ] DNS records added for custom domain
- [ ] Build passes: `pnpm build`
- [ ] No TypeScript errors: `pnpm type-check`
- [ ] Code pushed to GitHub
- [ ] Vercel project created and linked
- [ ] Domain configured in Vercel settings

## Troubleshooting

**Port already in use?**
```bash
# Kill process on port 3001
lsof -i :3001 | grep LISTEN | awk '{print $2}' | xargs kill -9
```

**Database connection error?**
- Check DATABASE_URL format
- Verify MySQL server is running
- Test connection manually

**Build fails?**
```bash
# Clear cache and rebuild
rm -rf dist node_modules/.vite
pnpm install
pnpm build
```

**Frontend can't reach backend?**
- Check backend is running on port 3001
- Verify proxy in `vite.config.ts` points to correct port
- Check CORS settings in `server/index.ts`

## Support Resources

- **Vercel Docs**: https://vercel.com/docs
- **tRPC Docs**: https://trpc.io
- **Tailwind CSS**: https://tailwindcss.com
- **Drizzle ORM**: https://orm.drizzle.team
- **React**: https://react.dev

## Next Steps

1. Install dependencies: `pnpm install`
2. Set up `.env.local` with your API keys
3. Run locally: `pnpm dev`
4. Test all pages and features
5. Follow `DEPLOYMENT_GUIDE.md` to deploy to Vercel

Good luck! ðŸš€
